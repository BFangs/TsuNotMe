{% extends 'base.html' %}
{% block content %}

<h1>TsuNotMe</h1>
<div>
<h2>WAVE</h2>
</div>
<div>
<h2>START LOCATION</h2>
<form class="form-inline" id='location-form'>
  <div class="form-group">
    <label for="InputName">Location Name</label>
    <input type="text" class="form-control" id="InputName" placeholder="Hackbright">
  </div>
  <div class="form-group">
    <label for="InputAddress">Enter Address:</label>
    <input type="text" class="form-control" id="InputAddress" placeholder="683 Sutter St, San Francisco, CA, 94109">
  </div>
  <button type="submit" class="btn btn-default">Pick Location!</button>
</form>
</div>
<div>
<h2>ESCAPE</h2>
<button type="button" id="LocationPicker">I Picked My Location!</button>
</div>
<div id='google_map'></div>
<script src="https://code.jquery.com/jquery.js"></script>
<script>
    var map;
    var San_Francisco = {lat: 37.7749, lng: -122.4194};
    var drop_marker;
    var marker_lat;
    var marker_lng;
    function initMap() {
        map = new google.maps.Map(document.getElementById('google_map'), {
            center: San_Francisco,
            zoom: 12
        });
        drop_marker = new google.maps.Marker({
            position: San_Francisco,
            draggable: true,
            map: map,
            title: 'BOOP'
        });
        google.maps.event.addListener(map, 'click', function(event) {
            updateMarker(event.latLng);
        });
        drop_marker.addListener('dragend', function(event) {
            updateLocation();
        });
        updateLocation();
    }
    function updateLocation(){
        marker_lat = drop_marker.getPosition().lat();
        marker_lng = drop_marker.getPosition().lng();
        console.log(marker_lat, marker_lng);
    }
    function updateMarker(data){
        drop_marker.setPosition(data);
        updateLocation();
    }
    $('#LocationPicker').click(updateLocation);
    $('#location-form').submit(updateMarker);
</script>
<script src="https://maps.googleapis.com/maps/api/js?key={{ API_KEY }}&callback=initMap" async defer></script>



{% endblock %}
